<html lang="en" ng-app="Stock-CMS">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>IEPF info</title>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .s1 {
            color: black;
            font-family: Calibri, sans-serif;
            font-style: normal;
            font-weight: bold;
            text-decoration: none;
            font-size: 12pt;
        }

        .s2 {
            color: black;
            font-family: Calibri, sans-serif;
            font-style: normal;
            font-weight: bold;
            text-decoration: none;
            font-size: 8pt;
            vertical-align: 4pt;
        }

        .s3 {
            color: black;
            font-family: Calibri, sans-serif;
            font-style: normal;
            font-weight: normal;
            text-decoration: none;
            font-size: 12pt;
        }

        table,
        tbody {
            vertical-align: top;
            overflow: visible;
        }
    </style>
</head>
<body style="padding-left: 5%;" ng-controller="FormController">
    <div class="row align-items-center">
        <!-- Arrow Icon aligned to the left -->
        <a class="col-md-1 text-start" style="font-size:35px;" ng-click="navtogenerateform()">
            <i class="bi bi-arrow-left"></i>
        </a>

        <!-- Centered Heading -->
        <div class="col-md-10 text-center">
            <h3>IEPF info</h3>
        </div>
    </div>
    <div ng-if="hDiv">
        <form name="gForm" ng-submit="genrateForm()">
            <div class="row">
                @* <div class="col-md-12"> *@
                <div class="form-group mb-3">
                    <label for="seletedid" class="form-label">select customer</label>
                    <select class="form-select w-auto" ng-options="f.id as f.name for f in docs" ng-model="seletedid" ng-change="loadCustomers(seletedid)">
                        <option selected disabled value="">Select customer</option>
                    </select>
                </div>
                <div class="form-group mb-3 col-md-3">
                    <label for="username" class="form-label">Username</label>
                    <input type="text" ng-model="data.username" class="form-control search-orders" placeholder="Username">
                </div>
                <div class="form-group mb-3 col-md-3">
                    <label for="password" class="form-label">Password</label>
                    <input type="text" ng-model="data.password" class="form-control search-orders" placeholder="Password">
                </div> 
                <div class="form-group mb-3 col-md-3">
                    <label for="hint" class="form-label">Hint</label>
                    <input type="text" ng-model="data.hint" class="form-control search-orders" placeholder="Hint">
                </div>
                @* </div> *@
                <div class="text-center m-2 col-md-4">
                    <button type="submit" class="btn" style="background-color:#003980; color:white;">
                        Genrate Form
                    </button>
                </div>
            </div>
        </form>
    </div>
    <div id="printForm">    
        <p style="text-indent: 0pt; text-align: left"><br /></p>
    <table style="border-collapse: collapse; margin-left: 6.5pt"
           cellspacing="0">
        <tr style="height: 14pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s1"
                   style="
              padding-left: 1pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: center;
            ">
                    Particulars
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s1"
                   style="
              padding-left: 1pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: center;
            ">
                    1<span class="s2">st</span> Holder
                </p>
            </td>
        </tr>
        <tr style="height: 15pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: left;
            ">
                    Name as per PAN
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p style="text-indent: 0pt; text-align: left">{{data.customerName}}<br /></p>
            </td>
        </tr>
        <tr style="height: 14pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: left;
            ">
                    Father’s Name
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                    <p style="text-indent: 0pt; text-align: left">{{data.relativesName}}<br /></p>
            </td>
        </tr>
        <tr style="height: 15pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: left;
            ">
                    PAN No
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                    <p style="text-indent: 0pt; text-align: left">{{data.pan}}<br /></p>
            </td>
        </tr>
        <tr style="height: 14pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: left;
            ">
                    Adhar Card No
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                    <p style="text-indent: 0pt; text-align: left">{{data.aadhar}}<br /></p>
            </td>
        </tr>
        <tr style="height: 14pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: left;
            ">
                    DOB
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                    <p style="text-indent: 0pt; text-align: left">{{data.dob | date:'dd/MM/yyyy'}}<br /></p>
            </td>
        </tr>
        <tr style="height: 15pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: left;
            ">
                    Address as per Adhar
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                    <p style="text-indent: 0pt; text-align: left">{{data.address}}<br />
                    </p>
            </td>
        </tr>
        <tr style="height: 14pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: left;
            ">
                    Mobile No
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                    <p style="text-indent: 0pt; text-align: left">{{data.mobile}}<br /></p>
            </td>
        </tr>
        <tr style="height: 14pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 12pt;
              text-align: left;
            ">
                    Email ID
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                    <p style="text-indent: 0pt; text-align: left">{{data.email}}<br /></p>
            </td>
        </tr>
        <tr style="height: 24pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="padding-left: 5pt; text-indent: 0pt; text-align: left">
                    DP ID &amp; Client ID
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                    <p style="text-indent: 0pt; text-align: left">{{data.dpid}} &amp; {{data.clientid}}<br /></p>
            </td>
        </tr>
        <tr style="height: 14pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s1"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 12pt;
              text-align: left;
            ">
                    BANK DETAILS
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p style="text-indent: 0pt; text-align: left"><br /></p>
            </td>
        </tr>
        <tr style="height: 15pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: left;
            ">
                    Bank Name
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                    <p style="text-indent: 0pt; text-align: left">{{data.bankname}}<br /></p>
            </td>
        </tr>
        <tr style="height: 14pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: left;
            ">
                    Bank Add
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                    <p style="text-indent: 0pt; text-align: left">{{data.bankaddress}}<br /></p>
            </td>
        </tr>
        <tr style="height: 15pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: left;
            ">
                    Bank A/C No
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                    <p style="text-indent: 0pt; text-align: left">{{data.accountno}}<br /></p>
            </td>
        </tr>
        <tr style="height: 14pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: left;
            ">
                    Bank IFSC
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                    <p style="text-indent: 0pt; text-align: left">{{data.ifsccode}}<br /></p>
            </td>
        </tr>
        <tr style="height: 14pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: left;
            ">
                    Bank MICR
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                    <p style="text-indent: 0pt; text-align: left">{{data.micrcode}}<br /></p>
            </td>
        </tr>
        <tr style="height: 15pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s1"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: left;
            ">
                    MCA PORTAL LOG IN DETAILS
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p style="text-indent: 0pt; text-align: left"><br /></p>
            </td>
        </tr>
        <tr style="height: 14pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: left;
            ">
                    User Name
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                    <p style="text-indent: 0pt; text-align: left">{{data.username}}<br /></p>
            </td>
        </tr>
        <tr style="height: 15pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: left;
            ">
                    Password
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                    <p style="text-indent: 0pt; text-align: left">{{data.password}}<br /></p>
            </td>
        </tr>
        <tr style="height: 14pt">
            <td style="
            width: 169pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                <p class="s3"
                   style="
              padding-left: 5pt;
              text-indent: 0pt;
              line-height: 13pt;
              text-align: left;
            ">
                    Hint Ans
                </p>
            </td>
            <td style="
            width: 170pt;
            border-top-style: solid;
            border-top-width: 1pt;
            border-left-style: solid;
            border-left-width: 1pt;
            border-bottom-style: solid;
            border-bottom-width: 1pt;
            border-right-style: solid;
            border-right-width: 1pt;
          ">
                    <p style="text-indent: 0pt; text-align: left">{{data.hint}}<br /></p>
            </td>
        </tr>
    </table>
 </div>
    <button class="btn btn-store" ng-click="printDiv('printForm')">Print</button>
  </body>
<script>
    angular.module('Stock-CMS', []).controller('FormController', function ($scope, $http,$timeout) {
        $scope.customers = [];
         $scope.data = undefined;
            $scope.hDiv = true;
            var params = new URLSearchParams(window.location.search);
            var id = params.get('id');
            var id2 = params.get('id2');
        var isProcessing = false;

        // showLoader();

         // Load Customers
         $scope.loadCustomers = function (sid) {
             if(id){
                 $scope.hDiv = true;
            $http.get('/Enquiry/GetStocksById/'+id).then(function (response) {
                var result = response.data;
                
                $http.get('/Form/GetHolderByStockId/' +  id).then(function (response) {
                     $scope.docs = response.data;
                    var doc = $scope.docs.find(x => x.id === sid);
                      $http.get('/doc/GetBank/'+ doc.id).then(function (response) {
         var bank = response.data[0];
                $scope.data = {
                       customerName : doc.nameAsPerPan,
                       relativesName: doc.relativesName,
                       pan: doc.pan,
                       aadhar: doc.aadhar,
                       dob: new Date(doc.dob),
                       address : doc.addressAsPerAadhar,
                       mobile: doc.mobile,
                       email: doc.email,
                       dpid: doc.dpid,
                       clientid: doc.clientId,
                       bankname: bank.bankName,
                       bankaddress:bank.postalAddress,
                       accountno: bank.accountNo,
                       ifsccode: bank.ifsccode,
                       micrcode: bank.micrcode,
                       username: '',
                       password: '',
                       hint: '',
                };

                hideLoader();
                                    }, function (error) {
        console.error('Error loading Bank Deatails:', error);
        hideLoader();
    });
                }, function (error) {
                    console.error('Error loading Docs:', error);
                    hideLoader();
                });
            }, function (error) {
                console.error('Error loading customers:', error);
                hideLoader();
            });
            }

            if(id2){
                 $scope.hDiv = false;
            $http.get('/Form/GetGenratedFormById/'+id2).then(function (response) {
                var result = response.data;
                var obj = JSON.parse(result.jsonString);
                $scope.data = {
                    customerName: obj.customerName,
                    relativesName: obj.relativesName,
                    pan: obj.pan,
                    aadhar: obj.aadhar,
                    dob: new Date(obj.dob),
                    address: obj.address,
                    mobile: obj.mobile,
                    email: obj.email,
                    dpid: obj.dpid,
                    clientid: obj.clientid,
                    bankname: obj.bankname,
                    bankaddress: obj.bankaddress,
                    accountno: obj.accountno,
                    ifsccode: obj.ifsccode,
                    micrcode: obj.micrcode,
                    username: obj.username,
                    password: obj.password,
                    hint: obj.hint,
                };
                                id = result.stockId;

                checkData();
                hideLoader();
            }, function (error) {
                console.error('Error loading customers:', error);
                hideLoader();
            });
            }
        };

                        function checkData() {
        if ($scope.data !== undefined) {
            // Delay the printDiv execution until the next digest cycle
            $timeout(function() {
                $scope.printDiv('printForm');
            }, 0);  // 0 delay to ensure it runs after the view update
        } else {
            setTimeout(checkData, 1000); // Retry after 1000ms if data is not yet available
        }
    }

          $scope.calculateAge = function(dob) {
      if (!dob) {
        return '';
      }
      var birthDate = new Date(dob);
      var currentDate = new Date();
      var age = currentDate.getFullYear() - birthDate.getFullYear();
      var m = currentDate.getMonth() - birthDate.getMonth();

      // Adjust age if the current month is before the birth month or if the birth day hasn't occurred yet
      if (m < 0 || (m === 0 && currentDate.getDate() < birthDate.getDate())) {
        age--;
      }
      return age;
    };

        $scope.navtogenerateform = function () {
        window.open('/Form/GenerateForm/'+id, '_self');
    };
        //Genrate Form
         $scope.genrateForm = function () {
             if(id){
             let jsonString = JSON.stringify($scope.data, null, 2);
             var data ={
                 formName : 'IEPF info',
                 StockId : id,
                 url : `/Form/IEPFinfo?id2=`,
                 jsonString : jsonString,
                 ClientName: $scope.data.customerName,
                 IsActive : true
             }

             const url = '/Form/GenrateForm';
                $http.post(url, data).then(function (response) {
                    if (response.data.success) {
                        Swal.fire({
                            title: 'Success',
                            text: response.data.message || 'Operation successful!',
                            icon: 'success',
                            confirmButtonText: 'OK'
                        });
                        // $scope.loadCustomers();
                        window.open(response.data.data.url + response.data.data.id,'_self')
                    } else {
                        Swal.fire({
                            title: 'Error!',
                            text: response.data.message || 'There was an issue adding the customer.',
                            icon: 'error',
                            confirmButtonText: 'Try Again'
                        });
                    }
                    isProcessing = false;
                }, function (error) {
                    Swal.fire({
                        title: 'Error',
                        text: 'An error occurred.',
                        icon: 'error',
                        confirmButtonText: 'OK'
                    });
                    isProcessing = false;
                });
            //console.log(dataString);
            }
         }

        // Load Customers
        // $scope.loadCustomers = function () {
        //     $http.get('/Master/GetCustomers').then(function (response) {
        //         $scope.customers = response.data[0];
        //         hideLoader();
        //     }, function (error) {
        //         console.error('Error loading customers:', error);
        //         hideLoader();
        //     });
        // };

        // $scope.loadDocs = function () {
        //     if (true) {
        //         $http.get('/doc/getDocs/' + 1).then(function (response) {
        //             $scope.docs = response.data;
        //             hideLoader();
        //         }, function (error) {
        //             console.error('Error loading Docs:', error);
        //             hideLoader();
        //         });
        //     }
        // };

        //Function
        $scope.printDiv = function (divId) {
                            var css ='<style type="text/css"> * { margin: 0; padding: 0; text-indent: 0; } .s1 { color: black; font-family: Calibri, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 12pt; } .s2 { color: black; font-family: Calibri, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 8pt; vertical-align: 4pt; } .s3 { color: black; font-family: Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; } table, tbody { vertical-align: top; overflow: visible; } </style>';
            var innerContents = document.getElementById(divId).innerHTML;
            var popupWinindow = window.open('', '_blank', 'width=600,height=700,scrollbars=no,menubar=no,toolbar=no,location=no,status=no,titlebar=no');
            popupWinindow.document.open();
            popupWinindow.document.write('<html><head><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">' + css + '</ head > <body style="padding-left: 8%;"onload="window.print()">' + innerContents + '</html>');
            popupWinindow.document.close();
        };
        //Initialize
        $scope.loadCustomers();
        // $scope.loadDocs();
    });
</script>
</html>
